<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>CloudFlare on 清松小站</title><link>https://coderqs.github.io/tags/cloudflare/</link><description>Recent content in CloudFlare on 清松小站</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 11 Mar 2019 00:00:00 +0800</lastBuildDate><atom:link href="https://coderqs.github.io/tags/cloudflare/index.xml" rel="self" type="application/rss+xml"/><item><title>使用 Cloudflare 后网站无限 301 跳转</title><link>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8-cloudflare-%E5%90%8E%E7%BD%91%E7%AB%99%E6%97%A0%E9%99%90-301-%E8%B7%B3%E8%BD%AC/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8-cloudflare-%E5%90%8E%E7%BD%91%E7%AB%99%E6%97%A0%E9%99%90-301-%E8%B7%B3%E8%BD%AC/</guid><description>&lt;h1 id="使用-cloudflare-后网站无限-301-跳转">使用 Cloudflare 后网站无限 301 跳转&lt;/h1>
&lt;h2 id="原因分析">原因分析&lt;/h2>
&lt;p>出现这个故障的大部分服务器都是因为服务器端使用了强制 HTTPS，而 CloudFlare 的 Flexible 策略原理是：用户访问时使用 HTTPS 访问到 CF 的节点，然后 CF通过HTTP方式回源到你的服务器去读取数据，这个时候对于你的服务器来说，CF 就是访客，所以服务器返回的状态都是 301。&lt;/p>
&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;p>将 CloudFlare 的 SSL 策略设为 Full 或者 Full(strict) 就能解决。&lt;/p>
&lt;h3 id="扩展">扩展&lt;/h3>
&lt;h4 id="cloudflare-的-ssl-可选模式">CloudFlare 的 SSL 可选模式&lt;/h4>
&lt;ol>
&lt;li>Off：关闭SSL，全程使用 HTTP；&lt;/li>
&lt;li>Flexible：A 使用 HTTPS，B 使用 HTTP，称为灵活加密；&lt;/li>
&lt;li>Full：AB全程使用 HTTPS，允许 B 程服务端使用自签名证书；&lt;/li>
&lt;li>Full(strict)：全程使用 HTTPS，与 Full 的区别在于服务端必须使用有效的可信任证书；&lt;/li>
&lt;/ol>
&lt;h2 id="参考资料">参考资料&lt;/h2>
&lt;p>&lt;a class="link" href="https://developer.aliyun.com/article/749187" target="_blank" rel="noopener"
>CDN访问异常篇之重定向的次数过多&lt;/a>&lt;br>
&lt;a class="link" href="https://vzone.me/897/" target="_blank" rel="noopener"
>Cloudflare开启HTTPS/SSL后无限301跳转的解决方法&lt;/a>&lt;/p></description></item></channel></rss>