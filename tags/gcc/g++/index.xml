<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>gcc/g++ on 清松小站</title><link>https://coderqs.github.io/tags/gcc/g++/</link><description>Recent content in gcc/g++ on 清松小站</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://coderqs.github.io/tags/gcc/g++/index.xml" rel="self" type="application/rss+xml"/><item><title>GNU C++ 编译器的换名规则</title><link>https://coderqs.github.io/2019/03/gnu-c-%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E6%8D%A2%E5%90%8D%E8%A7%84%E5%88%99/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/gnu-c-%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E6%8D%A2%E5%90%8D%E8%A7%84%E5%88%99/</guid><description>&lt;h1 id="gnu-c-编译器的换名规则">GNU C++ 编译器的换名规则&lt;/h1>
&lt;h3 id="全局变量">全局变量&lt;/h3>
&lt;p>不做任何修改&lt;/p>
&lt;h3 id="全局函数">全局函数&lt;/h3>
&lt;p>以&lt;code>_Z&lt;/code>开头，然后是函数名字符的个数，接着是函数名，最后是函数参数的别名。&lt;/p>
&lt;h3 id="类或命名空间中的变量或函数">类或命名空间中的变量或函数&lt;/h3>
&lt;p>以&lt;code>_ZN&lt;/code>开头，然后是变量或函数所在名字空间或类名字的字符长度，然后接着的是真正的名字空间或类名，然后是变量或函数名的长度和变量或函数名，后面紧跟字母&lt;code>E&lt;/code>，最后如果是函数的话则跟参数别名，如果是变量则什么都不用加。&lt;/p>
&lt;h3 id="构造函数和析构函数">构造函数和析构函数&lt;/h3>
&lt;p>以&lt;code>_ZN&lt;/code>开头，然后是构造函数所在名字空间和类名字的字符长度，然后接着的是真正的名字空间或类名，然后构造函数接&lt;code>C1&lt;/code>或者&lt;code>C2&lt;/code>，析构函数接&lt;code>D1&lt;/code>或者&lt;code>D2&lt;/code>，然后加上字母&lt;code>E&lt;/code>，最后接函数参数别名结束。&lt;/p>
&lt;h3 id="函数的参数">函数的参数&lt;/h3>
&lt;h4 id="是基本类型时">是基本类型时&lt;/h4>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数类型&lt;/th>
&lt;th>参数别名&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>void&lt;/td>
&lt;td>v&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>wchar_t&lt;/td>
&lt;td>w&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>bool&lt;/td>
&lt;td>b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>char&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>signed char&lt;/td>
&lt;td>a&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned char&lt;/td>
&lt;td>h&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>short&lt;/td>
&lt;td>s&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned short&lt;/td>
&lt;td>t&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>int&lt;/td>
&lt;td>i&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned int&lt;/td>
&lt;td>j&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>long&lt;/td>
&lt;td>l&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned long&lt;/td>
&lt;td>m&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>long long或__int64&lt;/td>
&lt;td>x&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned long long或unsigned __int64&lt;/td>
&lt;td>y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>__int128&lt;/td>
&lt;td>n&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>unsigned __int128&lt;/td>
&lt;td>o&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>float&lt;/td>
&lt;td>f&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>double&lt;/td>
&lt;td>d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>long double或__float80&lt;/td>
&lt;td>e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>__float128&lt;/td>
&lt;td>g&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h4 id="是类或结构体时">是类或结构体时&lt;/h4>
&lt;p>在类或者结构体名字前加上类或结构体名的字符长度&lt;br>
例如，全局函数&lt;code>int structure_func(int i, struct test s, double d)&lt;/code>，其经过符号改编后，函数名变成了&lt;code>_Z14structure_funci4testd&lt;/code>。&lt;/p>
&lt;h4 id="是指针时">是指针（*）时&lt;/h4>
&lt;p>含有指针时，该参数的别名是&lt;code>P&lt;/code>（大写）加上该指针指向的参数类型的别名。当参数为指针的指针时，该参数的别名是&lt;code>PP&lt;/code>加上所指向的参数类型的别名，以此类推。&lt;/p>
&lt;h4 id="是一维数组时">是一维数组时&lt;/h4>
&lt;p>和参数是指针的处理方式一样，也是&lt;code>P&lt;/code>加上作为参数的数组其元素类型的别名。&lt;/p>
&lt;h4 id="是多维数组时">是多维数组时&lt;/h4>
&lt;p>第一维可以看做是指针，其它维则看做是数组。&lt;br>
当函数参数中含有多维数组时，以&lt;code>P&lt;/code>（代表数组的第一维）开始，后面接&lt;code>A&lt;/code>加上各维数组的长度，以&lt;code>_&lt;/code>间隔，最后以下划线加数组元素类型的别名结束。&lt;br>
例如，全局函数&lt;code>void multi_array_func(int a[10][10][20][30])&lt;/code>，其经过符号改编后，函数名变成了&lt;code>_Z16multi_array_funcPA10_A20_A30_i&lt;/code>。&lt;/p>
&lt;h4 id="含有const修饰符时">含有const修饰符时&lt;/h4>
&lt;p>以&lt;code>K&lt;/code>（大写）开始，后面接修饰参数类型的别名&lt;/p>
&lt;h4 id="是引用时">是引用（&amp;amp;）时&lt;/h4>
&lt;p>以&lt;code>R&lt;/code>（大写）开始，后面加上该引用所引用的变量类型的别名。&lt;br>
例如，全局函数&lt;code>void ref_const_func(const int &amp;amp;i)&lt;/code>，其经过符号改编后，函数名变成了&lt;code>_Z14ref_const_funcRKi&lt;/code>。&lt;/p>
&lt;h4 id="是别的命名空间中的类或结构体">是别的命名空间中的类或结构体&lt;/h4>
&lt;p>该参数的别名是&lt;code>N&lt;/code>（大写），加上空间名的长度，再加上空间名，接着是类或结构名的长度和类或结构的名字，最后以&lt;code>E&lt;/code>（大写）结束。&lt;/p>
&lt;h3 id="总结">总结&lt;/h3>
&lt;ol>
&lt;li>除了全局变量不用做改编之外，其它所需要改编符号的时候，都是以&lt;code>_Z&lt;/code>开始；
&lt;ul>
&lt;li>若想表示某个符号是在命名空间或类中的，要以&lt;code>N&lt;/code>开始，以&lt;code>E&lt;/code>结束；&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>所有的名字空间名、类名、函数名或变量名，改编的时候都是名字所包含的字符数加上真正的名字；
&lt;ul>
&lt;li>所有的名字按照从外层到里层的顺序进行改编；&lt;/li>
&lt;li>如果是函数的话，所有的参数按照前后出现的顺序进行改编。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h2 id="参考资料">参考资料&lt;/h2>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/Roland_Sun/article/details/43233565" target="_blank" rel="noopener"
>GNU C++的符号改编机制介绍&lt;/a>&lt;/p></description></item><item><title>升级 GCC</title><link>https://coderqs.github.io/2019/03/%E5%8D%87%E7%BA%A7-gcc/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E5%8D%87%E7%BA%A7-gcc/</guid><description>&lt;h1 id="升级-gcc">升级 GCC&lt;/h1>
&lt;h2 id="编译-gcc">编译 GCC&lt;/h2>
&lt;h3 id="下载源码">下载源码&lt;/h3>
&lt;h4 id="方法一">方法一&lt;/h4>
&lt;p>在&lt;a class="link" href="https://gcc.gnu.org/mirrors.html" target="_blank" rel="noopener"
>gcc官方镜像&lt;/a>下载源码的压缩包&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>wget http://ftp.gnu.org/gnu/gcc/gcc-8.4.0/gcc-8.4.0.tar.gz
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar -zxvf gcc-8.4.0.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="方法二">方法二&lt;/h4>
&lt;p>在&lt;a class="link" href="https://github.com/gcc-mirror/gcc/" target="_blank" rel="noopener"
>github&lt;/a>上载，&lt;strong>注意这种方式是展开的源码，文件较多较大，下载时间可能更长&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-Shell" data-lang="Shell">&lt;span style="display:flex;">&lt;span>git clone https://github.com/gcc-mirror/gcc.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装依赖">安装依赖&lt;/h3>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>yum install -y gmp gmp-devel mpfr mpfr-devel libmpc libmpc-devel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="编译安装">编译安装&lt;/h3>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mkdir gcc-8.4.0-build &amp;amp;&amp;amp; &lt;span style="color:#24909d">cd&lt;/span> gcc-8.4.0-build
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>../gcc-8.4.0/configure --enable-languages=c,c++ --disable-multilib
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make -j &lt;span style="color:#6ab825;font-weight:bold">$(&lt;/span>nproc&lt;span style="color:#6ab825;font-weight:bold">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>configure&lt;/code> 更多的配置选项在&lt;a class="link" href="https://gcc.gnu.org/install/configure.html" target="_blank" rel="noopener"
>这里查看&lt;/a>&lt;br>
&lt;strong>注意&lt;/strong>：编译之前要保证 &lt;code>/tmp&lt;/code> 有足够多的磁盘空间！&lt;/p>
&lt;h4 id="安装">安装&lt;/h4>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>make install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>添加环境变量 编译默认的安装路径是 &lt;code>/usr/local/bin&lt;/code>, 在 &lt;code>/etc/profile&lt;/code> 中追加&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#24909d">export&lt;/span> &lt;span style="color:#40ffff">PATH&lt;/span>=/usr/local/bin:&lt;span style="color:#40ffff">$PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#24909d">export&lt;/span> &lt;span style="color:#40ffff">LD_LIBRARY_PATH&lt;/span>=/usr/local/lib64:&lt;span style="color:#40ffff">$LD_LIBRARY_PATH&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>修改完成后保存，使其生效&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#24909d">source&lt;/span> /etc/profile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="验证">验证&lt;/h4>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>gcc --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>使用内建 specs。
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#40ffff">COLLECT_GCC&lt;/span>=gcc
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#40ffff">COLLECT_LTO_WRAPPER&lt;/span>=/usr/local/libexec/gcc/x86_64-pc-linux-gnu/8.4.0/lto-wrapper
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>目标：x86_64-pc-linux-gnu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>配置为：../gcc-8.4.0/configure --enable-languages=c,c++ --disable-multilib
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>线程模型：posix
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>gcc 版本 8.4.0 (GCC)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="修改软连接">修改软连接&lt;/h4>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>ln -sf /usr/local/lib64/libstdc++.so.6.0.25 /usr/lib64/libstdc++.so.6
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ln -sf /usr/local/bin/gcc /usr/bin/cc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>注&lt;/strong>：如果之前未安装过
gcc，到这里应该就结束了，但之前有就需要将旧的卸载(因为我解决不了两个版本共存的冲突问题)，并链接新的
&lt;code>libstdc++&lt;/code>&lt;/p>
&lt;h3 id="遇到的问题">遇到的问题&lt;/h3>
&lt;h4 id="building-gcc-requires-gmp-42--mpfr-240-and-mpc-080-">Building GCC requires GMP 4.2 , MPFR 2.4.0 and MPC 0.8.0 .&lt;/h4>
&lt;p>缺少依赖项，使用&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>yum install -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="fatal-error-killed-signal-terminated-program-cc1plus">fatal error: Killed signal terminated program cc1plus&lt;/h4>
&lt;p>原因是内存不够了（vps
内存就512m），可以通过添加虚拟内存来解决，虚拟内存的增加方法可参考《&lt;a class="link" href="https://www.cnblogs.com/iakud/p/3825870.html" target="_blank" rel="noopener"
>解决编译GCC内存不足的错误&lt;/a>》和《&lt;a class="link" href="https://www.cnblogs.com/iakud/p/3825848.html" target="_blank" rel="noopener"
>设置和修改Linux的swap分区大小&lt;/a>》&lt;/p>
&lt;h2 id="通过-yum-升级">通过 yum 升级&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.softwarecollections.org/en/" target="_blank" rel="noopener"
>Software Collections&lt;/a>（也称为SCL）是一个社区项目，使您可以在同一系统上构建，安装和使用多个版本的软件，而不会影响系统默认软件包。通过启用软件集合，您可以访问核心存储库中不可用的较新版本的编程语言和服务。&lt;br>
SCL 存储库提供了一个名为 Developer Toolset 的程序包，其中包括 GNU
Compiler Collection 的较新版本以及其他开发和调试工具。&lt;br>
首先，安装 CentOS SCL 发行文件。它是 CentOS Extras
存储库的一部分，可以通过运行以下命令进行安装&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>yum install -y centos-release-scl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>当前，可以使用以下开发人员工具集集合：&lt;/p>
&lt;ul>
&lt;li>Developer Toolset 7&lt;/li>
&lt;li>Developer Toolset 6&lt;/li>
&lt;/ul>
&lt;p>在此示例中，我们将安装 Developer Toolset 版本 7。运行以下命令：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>yum install -y devtoolset-7
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>要访问 GCC 版本 7，需要使用 scl 工具启动新的 Shell 实例&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>scl &lt;span style="color:#24909d">enable&lt;/span> devtoolset-7 bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行完成后查看gcc的版本&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>gcc --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>gcc (GCC) 7.3.1 &lt;span style="color:#3677a9">20180303&lt;/span> (Red Hat 7.3.1-5)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Copyright (C) &lt;span style="color:#3677a9">2017&lt;/span> Free Software Foundation, Inc.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>This is free software; see the &lt;span style="color:#24909d">source&lt;/span> &lt;span style="color:#6ab825;font-weight:bold">for&lt;/span> copying conditions. There is NO
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>warranty; not even &lt;span style="color:#6ab825;font-weight:bold">for&lt;/span> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>详情可参考&lt;a class="link" href="https://linuxize.com/post/how-to-install-gcc-compiler-on-centos-7/#installing-multiple-gcc-versions" target="_blank" rel="noopener"
>《如何在 CentOS7 上安装GCC编译器》安装多个GCC版本&lt;/a>的部分&lt;/p></description></item></channel></rss>