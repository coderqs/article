<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>应用 on 清松小站</title><link>https://coderqs.github.io/categories/%E5%BA%94%E7%94%A8/</link><description>Recent content in 应用 on 清松小站</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 11 Mar 2019 00:00:00 +0800</lastBuildDate><atom:link href="https://coderqs.github.io/categories/%E5%BA%94%E7%94%A8/index.xml" rel="self" type="application/rss+xml"/><item><title>V2ray 的安装与配置</title><link>https://coderqs.github.io/2019/03/v2ray-%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/v2ray-%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</guid><description>&lt;h1 id="v2ray-的安装与配置">V2ray 的安装与配置&lt;/h1>
&lt;h2 id="v2ray-安装">V2ray 安装&lt;/h2>
&lt;h3 id="下载安装脚本">下载安装脚本&lt;/h3>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>curl -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -O https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-dat-release.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中 &lt;code>install-release.sh&lt;/code> 用于安装最新版本的 V2ray 的程序，&lt;code>install-dat-release.sh&lt;/code> 用于安装geoip.dat和geosite.dat的最新版本。&lt;/p>
&lt;h3 id="安装-v2ray">安装 V2ray&lt;/h3>
&lt;ul>
&lt;li>执行下面命令安装 V2ray&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>bash install-release.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>安装的文件结构如下&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span> /usr/local/bin/v2ray
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/bin/v2ctl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/share/v2ray/geoip.dat
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/share/v2ray/geosite.dat
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /usr/local/etc/v2ray/config.json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /var/log/v2ray/
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /var/log/v2ray/access.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /var/log/v2ray/error.log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /etc/systemd/system/v2ray.service
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> /etc/systemd/system/v2ray@.service
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>安装更新 geo 相关的文件&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span> bash install-dat-release.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="非官方安装脚本">非官方安装脚本&lt;/h3>
&lt;p>脚本的安装命令如下：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>wget -P /root -N --no-check-certificate &amp;#34;https://raw.githubusercontent.com/mack-a/v2ray-agent/master/install.sh&amp;#34; &amp;amp;&amp;amp; chmod 700 /root/install.sh &amp;amp;&amp;amp; /root/install.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这个脚本在很多教程中看到过，安装起来确实也方便很多，还支持自动配置常用的几种科学上网方式，其支持的安装类型如下&lt;/p>
&lt;ul>
&lt;li>VLESS+TCP+TLS&lt;/li>
&lt;li>VLESS+TCP+xtls-rprx-direct&lt;/li>
&lt;li>VLESS+WS+TLS【支持CDN、IPv6】&lt;/li>
&lt;li>VMess+TCP+TLS&lt;/li>
&lt;li>VMess+WS+TLS【支持CDN、IPv6】&lt;/li>
&lt;li>Trojan&lt;/li>
&lt;li>Trojan-Go+WS【支持CDN、不支持IPv6】&lt;/li>
&lt;/ul>
&lt;p>关于脚本的详细内容可以参考其在 Github 上的项目&lt;br>
&lt;img src="https://github.com/mack-a/v2ray-agent"
loading="lazy"
alt="v2ray-agent"
>。&lt;/p>
&lt;h2 id="v2ray-配置">V2ray 配置&lt;/h2>
&lt;p>可以参考官方在 GitHub 上给出的示例&lt;img src="https://github.com/v2fly/v2ray-examples"
loading="lazy"
alt="v2ray-examples"
>。&lt;/p>
&lt;h2 id="创建为系统服务">创建为系统服务&lt;/h2>
&lt;p>在目录 &lt;code>/usr/lib/systemd/system/&lt;/code> 下创建文件 &lt;code>v2ray.service&lt;/code>，在其中添加如下内容&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span> [Unit]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Description=V2Ray - A unified platform for anti-censorship
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Documentation=https://v2ray.com https://guide.v2fly.org
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> After=network.target nss-lookup.target
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Wants=network-online.target
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [Service]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Type=simple
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> User=root
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CapabilityBoundingSet=CAP_NET_BIND_SERVICE CAP_NET_RAW
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NoNewPrivileges=yes
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ExecStart=/usr/local/bin/v2ray -config /usr/local/etc/v2ray/config.json
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Restart=on-failure
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RestartPreventExitStatus=23
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> [Install]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> WantedBy=multi-user.target
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注：以上是一个示例，程序的路径与配置文件根据自己实际情况来更改。&lt;img src="https://coderqs.github.io/%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f/linux/%e7%b3%bb%e7%bb%9f%e6%9c%8d%e5%8a%a1"
loading="lazy"
alt="系统服务文件"
>的编写与说明请参阅对应的页面。&lt;/p></description></item><item><title>使用 Cloudflare 后网站无限 301 跳转</title><link>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8-cloudflare-%E5%90%8E%E7%BD%91%E7%AB%99%E6%97%A0%E9%99%90-301-%E8%B7%B3%E8%BD%AC/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8-cloudflare-%E5%90%8E%E7%BD%91%E7%AB%99%E6%97%A0%E9%99%90-301-%E8%B7%B3%E8%BD%AC/</guid><description>&lt;h1 id="使用-cloudflare-后网站无限-301-跳转">使用 Cloudflare 后网站无限 301 跳转&lt;/h1>
&lt;h2 id="原因分析">原因分析&lt;/h2>
&lt;p>出现这个故障的大部分服务器都是因为服务器端使用了强制 HTTPS，而 CloudFlare 的 Flexible 策略原理是：用户访问时使用 HTTPS 访问到 CF 的节点，然后 CF通过HTTP方式回源到你的服务器去读取数据，这个时候对于你的服务器来说，CF 就是访客，所以服务器返回的状态都是 301。&lt;/p>
&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;p>将 CloudFlare 的 SSL 策略设为 Full 或者 Full(strict) 就能解决。&lt;/p>
&lt;h3 id="扩展">扩展&lt;/h3>
&lt;h4 id="cloudflare-的-ssl-可选模式">CloudFlare 的 SSL 可选模式&lt;/h4>
&lt;ol>
&lt;li>Off：关闭SSL，全程使用 HTTP；&lt;/li>
&lt;li>Flexible：A 使用 HTTPS，B 使用 HTTP，称为灵活加密；&lt;/li>
&lt;li>Full：AB全程使用 HTTPS，允许 B 程服务端使用自签名证书；&lt;/li>
&lt;li>Full(strict)：全程使用 HTTPS，与 Full 的区别在于服务端必须使用有效的可信任证书；&lt;/li>
&lt;/ol>
&lt;h2 id="参考资料">参考资料&lt;/h2>
&lt;p>&lt;a class="link" href="https://developer.aliyun.com/article/749187" target="_blank" rel="noopener"
>CDN访问异常篇之重定向的次数过多&lt;/a>&lt;br>
&lt;a class="link" href="https://vzone.me/897/" target="_blank" rel="noopener"
>Cloudflare开启HTTPS/SSL后无限301跳转的解决方法&lt;/a>&lt;/p></description></item><item><title>使用树莓派遇见的一些问题的解决方法</title><link>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E8%A7%81%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E8%A7%81%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</guid><description>&lt;h1 id="使用树莓派遇见的一些问题的解决方法">使用树莓派遇见的一些问题的解决方法&lt;/h1>
&lt;h2 id="不能进入系统">不能进入系统&lt;/h2>
&lt;p>Failed to load SELinux policy. Freezing&lt;/p>
&lt;h3 id="背景">背景&lt;/h3>
&lt;p>想关闭 SELinux 结果改错配置项了，导致系统启动时一直提示&lt;code>Failed to load SELinux policy. Freezing&lt;/code>就是进不去系统。现在进不去系统，配置文件也没法修改，也不想重装系统，遂在网上找了各种方法&lt;/p>
&lt;ol>
&lt;li>windows下倒是可以使用 DiskGenius 来访问ext4格式的文件系统，但是写入的功能是收费的，也没找到破解版，其他软件只支持读取不支持写入；&lt;/li>
&lt;li>进入grub编辑的方法我是没弄成功；
后来突然想到挂载到虚拟机上试试，结果还真成功了，所以在此记录下。&lt;/li>
&lt;/ol>
&lt;h3 id="原因-永久关闭-selinux">原因 永久关闭 SELinux&lt;/h3>
&lt;p>时配置错了，应修改的是&lt;code>/etc/selinux/config&lt;/code>中的&lt;code>SELINUX&lt;/code>项改为&lt;code>disabled&lt;/code>，结果错改了&lt;code>SELINUXTYPE&lt;/code>项，原始配置如下&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span># This file controls the state of SELinux on the system.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># SELINUX= can take one of these three values:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># enforcing - SELinux security policy is enforced.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># permissive - SELinux prints warnings instead of enforcing.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># disabled - No SELinux policy is loaded.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SELINUX=enforcing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># SELINUXTYPE= can take one of these three values:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># targeted - Targeted processes are protected,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># minimum - Modification of targeted policy. Only selected processes are protected.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># mls - Multi Level Security protection. SELINUXTYPE=targeted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;ol>
&lt;li>将TF卡挂载到Linux虚拟机上，方法可以参考[《linux虚拟机上挂载U盘》](&lt;a class="link" href="https://jingyan.baidu.com/article/8ebacdf028b13449f65cd5a5.html" target="_blank" rel="noopener"
>https://jingyan.baidu.com/article/8ebacdf028b13449f65cd5a5.html&lt;/a>)&lt;/li>
&lt;li>使用&lt;code>fdisk -l&lt;/code>查看磁盘信息&lt;/li>
&lt;li>使用&lt;code>mount /dev/sdb4 /usb&lt;/code>挂载&lt;/li>
&lt;/ol>
&lt;p>挂载完成后就可以访问磁盘了，进去把配置修改正确再插入树莓派启动，完美！&lt;/p></description></item><item><title>树莓派系统的烧录</title><link>https://coderqs.github.io/2019/03/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%83%A7%E5%BD%95/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%83%A7%E5%BD%95/</guid><description>&lt;h1 id="树莓派系统的烧录">树莓派系统的烧录&lt;/h1>
&lt;h2 id="环境准备">环境准备&lt;/h2>
&lt;h3 id="系统镜像">系统镜像&lt;/h3>
&lt;p>树莓派有专用的系统 &lt;strong>raspbian&lt;/strong> 可以在其&lt;a class="link" href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener"
>官网下载&lt;/a>。不过我要使用的是 &lt;strong>Centos7&lt;/strong>，系统文件可在其官网的&lt;a class="link" href="https://www.centos.org/download/" target="_blank" rel="noopener"
>下载页面&lt;/a>进行下载，&lt;strong>注意一定要下载 ARM 版本&lt;/strong>。&lt;/p>
&lt;h3 id="使用的工具">使用的工具&lt;/h3>
&lt;h4 id="sd-memory-card-formatter">SD Memory Card formatter&lt;/h4>
&lt;p>这个是用于格式 SD 卡的，它有 &lt;a class="link" href="https://www.sdcard.org/downloads/formatter/sd-memory-card-formatter-for-windows-download/" target="_blank" rel="noopener"
>Windows 版&lt;/a>和 &lt;a class="link" href="https://www.sdcard.org/downloads/formatter/sd-memory-card-formatter-for-mac-download/" target="_blank" rel="noopener"
>Mac 版&lt;/a>，我使用的是 Windows 版。&lt;/p>
&lt;h4 id="win32diskimager">win32diskimager&lt;/h4>
&lt;p>这个是用于向 SD 卡烧录系统的，在其&lt;a class="link" href="https://win32diskimager.download/" target="_blank" rel="noopener"
>官网&lt;/a>下载最新的稳定版就可以，我是用的是&lt;a class="link" href="https://win32diskimager.download/Win32DiskImager-1.0.0-src.zip" target="_blank" rel="noopener"
>1.0.0 版本&lt;/a>。&lt;/p>
&lt;h2 id="烧录">烧录&lt;/h2>
&lt;h3 id="格式化-tf-卡">格式化 TF 卡&lt;/h3>
&lt;ul>
&lt;li>将卡连接到电脑上，打开 SD Memory Card formatter。在上面选择要格式化的 TF 卡，其他配置不用调，点击 Format&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E6%A0%91%E8%8E%93%E6%B4%BE/%E6%A0%BC%E5%BC%8F%E5%8C%96_TF_%E5%8D%A1%E6%93%8D%E4%BD%9C%E9%A1%B5%E9%9D%A2.PNG"
loading="lazy"
alt="格式化 TF 卡操作页面"
>&lt;/li>
&lt;/ul>
&lt;h3 id="烧录系统">烧录系统&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>打开 win32diskimager 在上面选择刚下载的 CentOS 的映像文件，&lt;strong>注意旁边的设备不要选错&lt;/strong>，然后点击写入&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E6%A0%91%E8%8E%93%E6%B4%BE/%E7%83%A7%E5%BD%95%E7%B3%BB%E7%BB%9F%E6%97%B6_win32diskimager_%E7%9A%84%E6%93%8D%E4%BD%9C%E9%A1%B5%E9%9D%A2.PNG"
loading="lazy"
alt="烧录系统时 win32diskimager 的操作页面"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>烧录好系统后，在我的电脑可以看到 TF 卡变成一个只有几十 M 的 boot 盘&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E6%A0%91%E8%8E%93%E6%B4%BE/%E6%9F%A5%E7%9C%8B%E7%83%A7%E5%BD%95%E5%A5%BD%E7%9A%84_TF_%E5%8D%A1.PNG"
loading="lazy"
alt="查看烧录好的 TF 卡"
>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="开机">开机&lt;/h3>
&lt;p>将烧录完成的 TF 卡插入到树莓派中，同时接上 HDMI 显示器、键鼠，最后接上电源即可开机。&lt;br>
正常情况下，开机是直接进入到桌面环境，网络连接可以选择接入网线或者连接 wifi。&lt;br>
&lt;strong>注：centos 的 arm 版本系统默认用户名：&lt;code>root&lt;/code>，默认密码：&lt;code>centos&lt;/code>&lt;/strong>&lt;/p>
&lt;h3 id="扩展系统的硬盘大小">扩展系统的硬盘大小&lt;/h3>
&lt;p>开机后发现系统硬盘大小并不是和 TF 一致，这是因为系统是通过 &lt;strong>烧录&lt;/strong> 而不是 &lt;strong>安装&lt;/strong> 进 TF 卡的。在烧录的过程中不会根据 TF 卡的大小建分区表、文件系统，而是把之前预先写好的分区表和文件系统按原样写上去，装完启动后在自己扩大分区和文件系统同。这样的好处是烧录过程非常简单，在任何操作系统下都能正确完成。&lt;/p>
&lt;h4 id="扩展方法">扩展方法&lt;/h4>
&lt;p>使用软件 &lt;a class="link" href="https://www.diskgenius.cn/download.php" target="_blank" rel="noopener"
>DiskGenius&lt;/a> 修改挂载点 &lt;code>/&lt;/code> 的磁盘大小即可。修改方法可以参考&lt;a class="link" href="http://bbs.shumeipaiba.com/thread-26-1-1.html" target="_blank" rel="noopener"
>这篇教程&lt;/a>&lt;/p>
&lt;h2 id="参考资料">参考资料&lt;/h2>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/weixin_41656968/article/details/79592624" target="_blank" rel="noopener"
>树莓派(Raspberry Pi 3)的系统烧录及使用&lt;/a>&lt;br>
&lt;a class="link" href="https://blog.csdn.net/qq_35379989/article/details/79050932" target="_blank" rel="noopener"
>树莓派安装系统详细步骤&lt;/a>&lt;br>
&lt;a class="link" href="https://blog.csdn.net/qq_29225913/article/details/100939347?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener"
>树莓派（一）——完整烧录及配置过程（超详细）&lt;/a>&lt;br>
&lt;a class="link" href="https://jianger.space/pi-system-installation-and-initialization-configuration/" target="_blank" rel="noopener"
>【树莓派】系统安装与初始化配置&lt;/a>]&lt;/p></description></item><item><title>小米路由器 mini 刷 openwrt</title><link>https://coderqs.github.io/2019/03/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8-mini-%E5%88%B7-openwrt/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8-mini-%E5%88%B7-openwrt/</guid><description>&lt;h1 id="小米路由器-mini-刷-openwrt">小米路由器 mini 刷 openwrt&lt;/h1>
&lt;h2 id="将系统刷成开发版">将系统刷成开发版&lt;/h2>
&lt;ol>
&lt;li>在 &lt;a class="link" href="http://www1.miwifi.com/miwifi_download.html" target="_blank" rel="noopener"
>MiWiFi&lt;/a> 下载路由器对应的 ROM 开发版，版本&lt;a class="link" href="http://bigota.miwifi.com/xiaoqiang/rom/r1cm/miwifi_r1cm_firmware_2e9b9_2.21.109.bin" target="_blank" rel="noopener"
>2.21.109&lt;/a>&lt;/li>
&lt;/ol>
&lt;h2 id="安装-miwifi_ssh">安装 miwifi_ssh&lt;/h2>
&lt;ol>
&lt;li>在 &lt;a class="link" href="http://www1.miwifi.com/miwifi_open.html" target="_blank" rel="noopener"
>MiWiFi 开发&lt;/a>页面点击 “开启 SSH 工具” 下载 SSH 工具 &lt;code>miwifi_ssh.bin&lt;/code>&lt;/li>
&lt;li>将路由器绑定小米账号后，在页面会显示 root 的密码&lt;/li>
&lt;li>将 &lt;code>miwifi_ssh.bin&lt;/code> 放入 U 盘，删除 U 盘上的其他文件，其他操作与刷 ROM 一致&lt;/li>
&lt;/ol>
&lt;h2 id="刷成-openwrt">刷成 OpenWrt&lt;/h2>
&lt;p>在 OpenWrt 的官网下载对应版本的固件，我的是&lt;a class="link" href="https://openwrt.org/toh/xiaomi/mini" target="_blank" rel="noopener"
>小米路由器 MINI&lt;/a>，其他型号的路由器可以在官网的&lt;a class="link" href="https://openwrt.org/toh/views/toh_fwdownload" target="_blank" rel="noopener"
>Table of Hardware: Firmware downloads&lt;/a>中搜索下载&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>scp openwrt*.bin root@192.168.31.1:/tmp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd /tmp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mtd -r write openwrt*.bin firmware
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如遇以下报错，改 &lt;code>firmware&lt;/code> 为 &lt;code>OS1&lt;/code> 即可&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>Could not open mtd device: firmware
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Can&amp;#39;t open device for writing!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="修改官方源">修改官方源&lt;/h1>
&lt;p>&lt;strong>注意：不同 CPU 的路由器的 OpenWrt 源的配置不完全相同，需要根据 CPU 的型号来配置，小米路由器 MINI 的 CPU 是 MT7620A&lt;/strong>&lt;br>
源配置文件的路径: &lt;code>/etc/opkg/distfeeds.conf&lt;/code>，将官方源注释掉后填入下面的源&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>src/gz reboot_core http://mirrors.ustc.edu.cn/openwrt/releases/19.07.5/targets/ramips/mt7620/packages
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>src/gz reboot_base http://mirrors.ustc.edu.cn/openwrt/releases/19.07.5/packages/mipsel_24kc/base
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>src/gz reboot_luci http://mirrors.ustc.edu.cn/openwrt/releases/19.07.5/packages/mipsel_24kc/luci
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>src/gz reboot_packages http://mirrors.ustc.edu.cn/openwrt/releases/19.07.5/packages/mipsel_24kc/packages
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>src/gz reboot_routing http://mirrors.ustc.edu.cn/openwrt/releases/19.07.5/packages/mipsel_24kc/routing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>src/gz reboot_telephony http://mirrors.ustc.edu.cn/openwrt/releases/19.07.5/packages/mipsel_24kc/telephony
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h1 id="openwrt-安装中文语言包">openwrt 安装中文语言包&lt;/h1>
&lt;p>语言的设置选项在路由的管理界面中 System -&amp;gt; System -&amp;gt; System Properties -&amp;gt; Language and Style -&amp;gt; Language，刚刷完的固件时选项只有英文，其他的需要安装&lt;/p>
&lt;h2 id="自动安装">自动安装&lt;/h2>
&lt;p>在路由的管理页面中 System -&amp;gt; Software，在 Download and install package 旁边的文本框中输入 &lt;code>luci-i18n-base-zh-cn&lt;/code> 点击 OK 系统会自动下载并安装&lt;/p>
&lt;h1 id="参考资料">参考资料&lt;/h1>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/myweishanli/article/details/45331975" target="_blank" rel="noopener"
>OPENWRT安装中文语言包&lt;/a>&lt;br>
&lt;a class="link" href="https://www.zzhyun.com/2020/09/04/178/" target="_blank" rel="noopener"
>OpenWrt之v2ray安装及配置&lt;/a>&lt;br>
&lt;a class="link" href="https://leamtrop.com/2017/05/11/flash-openwrt-squashfs/" target="_blank" rel="noopener"
>小米路由器 mini 刷 OpenWrt/PandoraBox/LEDE&lt;/a>&lt;/p>
&lt;hr>
&lt;h1 id="额外记录">额外记录&lt;/h1>
&lt;h2 id="安装-v2ray">安装 v2ray&lt;/h2>
&lt;p>下载 &lt;a class="link" href="https://github.com/kuoruan/openwrt-v2ray" target="_blank" rel="noopener"
>openwrt-v2ray&lt;/a> 和 &lt;a class="link" href="https://github.com/kuoruan/luci-app-v2ray" target="_blank" rel="noopener"
>luci-app-v2ray&lt;/a>
到本地（其中的 luci-i18n-v2ray-zh-cn 是中文包，看需求下载）&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E8%B7%AF%E7%94%B1%E5%99%A8/v2ray-core-mini%20%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.PNG"
loading="lazy"
alt="v2ray-core-mini下载页面"
>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E8%B7%AF%E7%94%B1%E5%99%A8/luci-app-v2ray%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.PNG"
loading="lazy"
alt="luci-app-v2ray下载页面"
>&lt;br>
将下载的文件上传到路由器中，我执行的安装命令是：&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>opkg install v2ray-core-mini_4.34.0-1_mipsel_24kc.ipk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install luci-app-v2ray_1.5.6_all.ipk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="遇见的问题">遇见的问题&lt;/h2>
&lt;h3 id="1-verify_pkg_installable-only-have-11312kb-available-on-filesystem-overlay-pkg-v2ray-core-needs-12717">1. verify_pkg_installable: Only have 11312kb available on filesystem /overlay, pkg v2ray-core needs 12717&lt;/h3>
&lt;p>这是因为 &lt;code>/overlay&lt;/code> 分区可用空间不够了。&lt;/p>
&lt;ul>
&lt;li>修改&lt;code>/etc/opkg.conf&lt;/code>，将其中的&lt;code>overlay_root&lt;/code>的值修改为&lt;code>/tmp&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dest root /
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dest ram /tmp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>lists_dir ext /var/opkg-lists
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>option overlay_root /tmp
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>option check_signature
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>&lt;del>保存文件后再执行安装命令，在安装命令后增加&lt;code>-d ram&lt;/code>的参数&lt;/del>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>opkg install [package] -d ram
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;del>详情可参见&lt;a class="link" href="https://forum.openwrt.org/t/opkg-to-ram-how-to/31172" target="_blank" rel="noopener"
>这里&lt;/a>&lt;/del>。 但&lt;strong>这种方法行不通&lt;/strong>。 -d ram 的选项意思是将软件安装到 &lt;code>/tmp&lt;/code> 路径下，而 &lt;code>/tmp&lt;/code> 则是 &lt;code>tmpfs&lt;/code> 类型的文件系统（这个可以使用 &lt;code>df -h&lt;/code> 可以看到），是存在内存中的，关机之后就没有了。&lt;/p>
&lt;h3 id="2-satisfy_dependencies_for-cannot-satisfy-the-following-dependencies">2. satisfy_dependencies_for: Cannot satisfy the following dependencies&lt;/h3>
&lt;p>查看内核版本的命令 &lt;code>opkg info kernel&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>快照版本在安装空隙时是否使用官方源有一定的机率出行该问题。
解决的方案是编译阶段就将对应的依赖包安装进去。v2ray并不依赖内核版本&lt;/p>
&lt;p>可以尝试手动安装ip，ipset，iptables-mod-tproxy，dnsmasq-full，resolveip&lt;/p>
&lt;p>然后再安装luci-app-v2ray&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>opkg remove dnsmasq
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install ip ipset iptables-mod-tproxy dnsmasq-full resolveip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install luci-app-v2ray
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-info-service-disabled-main-info-transparent-proxy-disabled">3. [info] Service disabled: main [info] Transparent proxy disabled.&lt;/h3>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>[info] Service disabled: main
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[info] Transparent proxy disabled.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这时是已经安装成功了，这提示中的配置可以在 &lt;code>/etc/config/v2ray&lt;/code> 中修改。&lt;/p>
&lt;h3 id="4-module-lucicbi-not-found">4. module &amp;rsquo;luci.cbi&amp;rsquo; not found&lt;/h3>
&lt;p>有说需要&lt;a class="link" href="https://github.com/kuoruan/luci-app-v2ray/issues/42" target="_blank" rel="noopener"
>安装&lt;code>luci-compat&lt;/code>的&lt;code>luci-ap-sqm&lt;/code>可以解决&lt;/a>，但是使用
opkg 安装提示&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> Unknown &lt;span style="color:#6ab825;font-weight:bold">package&lt;/span> &lt;span style="color:#a61717;background-color:#e3d2d2">&amp;#39;&lt;/span>luci-compat&lt;span style="color:#a61717;background-color:#e3d2d2">&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Collected errors:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * opkg_install_cmd: Cannot install &lt;span style="color:#6ab825;font-weight:bold">package&lt;/span> luci-compat.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;a class="link" href="https://blog.csdn.net/weixin_43274097/article/details/107197717" target="_blank" rel="noopener"
>解决方法&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>opkg update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install luci luci-base luci-compat
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5">5.&lt;/h3>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-go" data-lang="go">&lt;span style="display:flex;">&lt;span> Collected errors:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * satisfy_dependencies_for: Cannot satisfy the following dependencies &lt;span style="color:#6ab825;font-weight:bold">for&lt;/span> v2ray-core:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * ca-certificates
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> * opkg_install_cmd: Cannot install &lt;span style="color:#6ab825;font-weight:bold">package&lt;/span> v2ray-core.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行 &lt;code>opkg update&lt;/code> 后再安装一下&lt;/p>
&lt;h4 id="参考资料-1">参考资料&lt;/h4>
&lt;p>&lt;a class="link" href="https://www.haiyun.me/archives/1075.html" target="_blank" rel="noopener"
>编译Openwrt固件安装软件内核版本不一致问题解决&lt;/a>&lt;br>
&lt;a class="link" href="https://github.com/kuoruan/luci-app-v2ray/issues/116" target="_blank" rel="noopener"
>OpenWRT内核不符合依赖&lt;/a>&lt;/p></description></item></channel></rss>