<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>raspberrypi on 清松小站</title><link>https://coderqs.github.io/tags/raspberrypi/</link><description>Recent content in raspberrypi on 清松小站</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 11 Mar 2019 00:00:00 +0800</lastBuildDate><atom:link href="https://coderqs.github.io/tags/raspberrypi/index.xml" rel="self" type="application/rss+xml"/><item><title>使用树莓派遇见的一些问题的解决方法</title><link>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E8%A7%81%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E4%BD%BF%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E9%81%87%E8%A7%81%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</guid><description>&lt;h1 id="使用树莓派遇见的一些问题的解决方法">使用树莓派遇见的一些问题的解决方法&lt;/h1>
&lt;h2 id="不能进入系统">不能进入系统&lt;/h2>
&lt;p>Failed to load SELinux policy. Freezing&lt;/p>
&lt;h3 id="背景">背景&lt;/h3>
&lt;p>想关闭 SELinux 结果改错配置项了，导致系统启动时一直提示&lt;code>Failed to load SELinux policy. Freezing&lt;/code>就是进不去系统。现在进不去系统，配置文件也没法修改，也不想重装系统，遂在网上找了各种方法&lt;/p>
&lt;ol>
&lt;li>windows下倒是可以使用 DiskGenius 来访问ext4格式的文件系统，但是写入的功能是收费的，也没找到破解版，其他软件只支持读取不支持写入；&lt;/li>
&lt;li>进入grub编辑的方法我是没弄成功；
后来突然想到挂载到虚拟机上试试，结果还真成功了，所以在此记录下。&lt;/li>
&lt;/ol>
&lt;h3 id="原因-永久关闭-selinux">原因 永久关闭 SELinux&lt;/h3>
&lt;p>时配置错了，应修改的是&lt;code>/etc/selinux/config&lt;/code>中的&lt;code>SELINUX&lt;/code>项改为&lt;code>disabled&lt;/code>，结果错改了&lt;code>SELINUXTYPE&lt;/code>项，原始配置如下&lt;/p>
&lt;div class="highlight">&lt;div style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#686868">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span># This file controls the state of SELinux on the system.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># SELINUX= can take one of these three values:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># enforcing - SELinux security policy is enforced.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># permissive - SELinux prints warnings instead of enforcing.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># disabled - No SELinux policy is loaded.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>SELINUX=enforcing
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># SELINUXTYPE= can take one of these three values:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># targeted - Targeted processes are protected,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># minimum - Modification of targeted policy. Only selected processes are protected.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span># mls - Multi Level Security protection. SELINUXTYPE=targeted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="解决方法">解决方法&lt;/h3>
&lt;ol>
&lt;li>将TF卡挂载到Linux虚拟机上，方法可以参考[《linux虚拟机上挂载U盘》](&lt;a class="link" href="https://jingyan.baidu.com/article/8ebacdf028b13449f65cd5a5.html" target="_blank" rel="noopener"
>https://jingyan.baidu.com/article/8ebacdf028b13449f65cd5a5.html&lt;/a>)&lt;/li>
&lt;li>使用&lt;code>fdisk -l&lt;/code>查看磁盘信息&lt;/li>
&lt;li>使用&lt;code>mount /dev/sdb4 /usb&lt;/code>挂载&lt;/li>
&lt;/ol>
&lt;p>挂载完成后就可以访问磁盘了，进去把配置修改正确再插入树莓派启动，完美！&lt;/p></description></item><item><title>树莓派系统的烧录</title><link>https://coderqs.github.io/2019/03/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%83%A7%E5%BD%95/</link><pubDate>Mon, 11 Mar 2019 00:00:00 +0800</pubDate><guid>https://coderqs.github.io/2019/03/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%83%A7%E5%BD%95/</guid><description>&lt;h1 id="树莓派系统的烧录">树莓派系统的烧录&lt;/h1>
&lt;h2 id="环境准备">环境准备&lt;/h2>
&lt;h3 id="系统镜像">系统镜像&lt;/h3>
&lt;p>树莓派有专用的系统 &lt;strong>raspbian&lt;/strong> 可以在其&lt;a class="link" href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="noopener"
>官网下载&lt;/a>。不过我要使用的是 &lt;strong>Centos7&lt;/strong>，系统文件可在其官网的&lt;a class="link" href="https://www.centos.org/download/" target="_blank" rel="noopener"
>下载页面&lt;/a>进行下载，&lt;strong>注意一定要下载 ARM 版本&lt;/strong>。&lt;/p>
&lt;h3 id="使用的工具">使用的工具&lt;/h3>
&lt;h4 id="sd-memory-card-formatter">SD Memory Card formatter&lt;/h4>
&lt;p>这个是用于格式 SD 卡的，它有 &lt;a class="link" href="https://www.sdcard.org/downloads/formatter/sd-memory-card-formatter-for-windows-download/" target="_blank" rel="noopener"
>Windows 版&lt;/a>和 &lt;a class="link" href="https://www.sdcard.org/downloads/formatter/sd-memory-card-formatter-for-mac-download/" target="_blank" rel="noopener"
>Mac 版&lt;/a>，我使用的是 Windows 版。&lt;/p>
&lt;h4 id="win32diskimager">win32diskimager&lt;/h4>
&lt;p>这个是用于向 SD 卡烧录系统的，在其&lt;a class="link" href="https://win32diskimager.download/" target="_blank" rel="noopener"
>官网&lt;/a>下载最新的稳定版就可以，我是用的是&lt;a class="link" href="https://win32diskimager.download/Win32DiskImager-1.0.0-src.zip" target="_blank" rel="noopener"
>1.0.0 版本&lt;/a>。&lt;/p>
&lt;h2 id="烧录">烧录&lt;/h2>
&lt;h3 id="格式化-tf-卡">格式化 TF 卡&lt;/h3>
&lt;ul>
&lt;li>将卡连接到电脑上，打开 SD Memory Card formatter。在上面选择要格式化的 TF 卡，其他配置不用调，点击 Format&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E6%A0%91%E8%8E%93%E6%B4%BE/%E6%A0%BC%E5%BC%8F%E5%8C%96_TF_%E5%8D%A1%E6%93%8D%E4%BD%9C%E9%A1%B5%E9%9D%A2.PNG"
loading="lazy"
alt="格式化 TF 卡操作页面"
>&lt;/li>
&lt;/ul>
&lt;h3 id="烧录系统">烧录系统&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>打开 win32diskimager 在上面选择刚下载的 CentOS 的映像文件，&lt;strong>注意旁边的设备不要选错&lt;/strong>，然后点击写入&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E6%A0%91%E8%8E%93%E6%B4%BE/%E7%83%A7%E5%BD%95%E7%B3%BB%E7%BB%9F%E6%97%B6_win32diskimager_%E7%9A%84%E6%93%8D%E4%BD%9C%E9%A1%B5%E9%9D%A2.PNG"
loading="lazy"
alt="烧录系统时 win32diskimager 的操作页面"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>烧录好系统后，在我的电脑可以看到 TF 卡变成一个只有几十 M 的 boot 盘&lt;br>
&lt;img src="https://raw.githubusercontent.com/coderqs/wiki_img/master/%E8%AE%BE%E5%A4%87/%E6%A0%91%E8%8E%93%E6%B4%BE/%E6%9F%A5%E7%9C%8B%E7%83%A7%E5%BD%95%E5%A5%BD%E7%9A%84_TF_%E5%8D%A1.PNG"
loading="lazy"
alt="查看烧录好的 TF 卡"
>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="开机">开机&lt;/h3>
&lt;p>将烧录完成的 TF 卡插入到树莓派中，同时接上 HDMI 显示器、键鼠，最后接上电源即可开机。&lt;br>
正常情况下，开机是直接进入到桌面环境，网络连接可以选择接入网线或者连接 wifi。&lt;br>
&lt;strong>注：centos 的 arm 版本系统默认用户名：&lt;code>root&lt;/code>，默认密码：&lt;code>centos&lt;/code>&lt;/strong>&lt;/p>
&lt;h3 id="扩展系统的硬盘大小">扩展系统的硬盘大小&lt;/h3>
&lt;p>开机后发现系统硬盘大小并不是和 TF 一致，这是因为系统是通过 &lt;strong>烧录&lt;/strong> 而不是 &lt;strong>安装&lt;/strong> 进 TF 卡的。在烧录的过程中不会根据 TF 卡的大小建分区表、文件系统，而是把之前预先写好的分区表和文件系统按原样写上去，装完启动后在自己扩大分区和文件系统同。这样的好处是烧录过程非常简单，在任何操作系统下都能正确完成。&lt;/p>
&lt;h4 id="扩展方法">扩展方法&lt;/h4>
&lt;p>使用软件 &lt;a class="link" href="https://www.diskgenius.cn/download.php" target="_blank" rel="noopener"
>DiskGenius&lt;/a> 修改挂载点 &lt;code>/&lt;/code> 的磁盘大小即可。修改方法可以参考&lt;a class="link" href="http://bbs.shumeipaiba.com/thread-26-1-1.html" target="_blank" rel="noopener"
>这篇教程&lt;/a>&lt;/p>
&lt;h2 id="参考资料">参考资料&lt;/h2>
&lt;p>&lt;a class="link" href="https://blog.csdn.net/weixin_41656968/article/details/79592624" target="_blank" rel="noopener"
>树莓派(Raspberry Pi 3)的系统烧录及使用&lt;/a>&lt;br>
&lt;a class="link" href="https://blog.csdn.net/qq_35379989/article/details/79050932" target="_blank" rel="noopener"
>树莓派安装系统详细步骤&lt;/a>&lt;br>
&lt;a class="link" href="https://blog.csdn.net/qq_29225913/article/details/100939347?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener"
>树莓派（一）——完整烧录及配置过程（超详细）&lt;/a>&lt;br>
&lt;a class="link" href="https://jianger.space/pi-system-installation-and-initialization-configuration/" target="_blank" rel="noopener"
>【树莓派】系统安装与初始化配置&lt;/a>]&lt;/p></description></item></channel></rss>